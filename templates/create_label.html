<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Create Shipping Label – CryptoParcel</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body class="cp-body">
<header class="cp-header">
    <div class="cp-header-inner">
        <a href="{{ url_for('dashboard') }}" class="cp-logo">
            <span class="cp-logo-mark">ＣＰ</span>
            <span class="cp-logo-text">CryptoParcel</span>
        </a>
        <nav class="cp-nav">
            <a href="{{ url_for('dashboard') }}">Dashboard</a>
            <a href="{{ url_for('wallet') }}">Wallet</a>
            <a href="{{ url_for('orders') }}">My Labels</a>
            <a href="{{ url_for('create_label') }}" class="cp-nav-primary">Create Label</a>
        </nav>
    </div>
</header>

<main class="cp-main">
    <div class="cp-page">
        <div class="cp-page-header">
            <div>
                <h1>Create a Shipping Label</h1>
                <p>Fill in the sender and recipient details, choose a service, and we’ll handle the rest.</p>
            </div>
            <div class="cp-page-meta">
                <div class="cp-meta-item">
                    <span class="cp-meta-label">Wallet balance</span>
                    <span class="cp-meta-value">
                        ${{ (current_user.balance_usd or 0.0) | round(2) }}
                    </span>
                </div>
            </div>
        </div>

        <div class="cp-grid">
            <!-- LEFT: FORM -->
            <section class="cp-card cp-card-main">
                <form method="POST" class="cp-form">
                    <!-- SERVICES & WEIGHT -->
                    <div class="cp-section">
                        <h2>Service &amp; Package</h2>
                        <div class="cp-grid-2">
                            <div class="cp-field">
                                <label for="service">Service</label>
                                <select id="service" name="service" required>
                                    <option value="USPS First-Class">USPS First-Class</option>
                                    <option value="USPS Priority Mail">USPS Priority Mail</option>
                                    <option value="USPS Priority Mail Express">USPS Priority Mail Express</option>
                                    <option value="UPS Ground">UPS Ground</option>
                                    <option value="UPS 2nd Day Air">UPS 2nd Day Air</option>
                                    <option value="UPS Next Day Air Saver">UPS Next Day Air Saver</option>
                                    <option value="FedEx Ground">FedEx Ground</option>
                                    <option value="FedEx Express Saver">FedEx Express Saver</option>
                                    <option value="FedEx 2Day">FedEx 2Day</option>
                                    <option value="FedEx Standard Overnight">FedEx Standard Overnight</option>
                                </select>
                                <p class="cp-help">More premium services will cost slightly more.</p>
                            </div>

                            <div class="cp-field">
                                <label for="weight_oz">Package Weight (oz)</label>
                                <input
                                    id="weight_oz"
                                    type="number"
                                    step="0.1"
                                    min="0.1"
                                    name="weight_oz"
                                    placeholder="e.g. 12.5"
                                    required
                                />
                                <p class="cp-help">Use ounces (1 lb = 16 oz).</p>
                            </div>
                        </div>
                    </div>

                    <!-- FROM ADDRESS -->
                    <div class="cp-section">
                        <h2>From Address</h2>
                        <div class="cp-grid-2">
                            <div class="cp-field">
                                <label for="from_name">Name</label>
                                <input id="from_name" name="from_name" type="text" required />
                            </div>
                            <div class="cp-field">
                                <label for="from_street1">Street</label>
                                <input id="from_street1" name="from_street1" type="text" required />
                            </div>
                        </div>
                        <div class="cp-grid-3">
                            <div class="cp-field">
                                <label for="from_city">City</label>
                                <input id="from_city" name="from_city" type="text" required />
                            </div>
                            <div class="cp-field">
                                <label for="from_state">State</label>
                                <input id="from_state" name="from_state" maxlength="2" placeholder="CA" type="text" required />
                            </div>
                            <div class="cp-field">
                                <label for="from_zip">ZIP</label>
                                <input id="from_zip" name="from_zip" type="text" required />
                            </div>
                        </div>
                    </div>

                    <!-- TO ADDRESS -->
                    <div class="cp-section">
                        <h2>To Address</h2>
                        <div class="cp-grid-2">
                            <div class="cp-field">
                                <label for="to_name">Name</label>
                                <input id="to_name" name="to_name" type="text" required />
                            </div>
                            <div class="cp-field">
                                <label for="to_street1">Street</label>
                                <input id="to_street1" name="to_street1" type="text" required />
                            </div>
                        </div>
                        <div class="cp-grid-3">
                            <div class="cp-field">
                                <label for="to_city">City</label>
                                <input id="to_city" name="to_city" type="text" required />
                            </div>
                            <div class="cp-field">
                                <label for="to_state">State</label>
                                <input id="to_state" name="to_state" maxlength="2" placeholder="TX" type="text" required />
                            </div>
                            <div class="cp-field">
                                <label for="to_zip">ZIP</label>
                                <input id="to_zip" name="to_zip" type="text" required />
                            </div>
                        </div>
                    </div>

                    <!-- REFERENCE -->
                    <div class="cp-section">
                        <h2>Reference (Optional)</h2>
                        <div class="cp-field">
                            <label for="reference">Order ID, notes, etc.</label>
                            <input
                                id="reference"
                                name="reference"
                                type="text"
                                placeholder="e.g. Amazon returns, Box #3"
                            />
                        </div>
                    </div>

                    <!-- SUBMIT -->
                    <div class="cp-actions">
                        <button type="submit" class="cp-btn-primary">
                            Generate Label &amp; Continue
                        </button>
                        <p class="cp-help">
                            We’ll calculate the label price automatically.
                            If your wallet balance is high enough, we’ll use it first.
                            Otherwise you’ll be redirected to pay with crypto via NOWPayments.
                        </p>
                    </div>
                </form>
            </section>

            <!-- RIGHT: INFO SIDEBAR -->
            <aside class="cp-card cp-card-side">
                <h2>How Payment Works</h2>
                <ul class="cp-list">
                    <li><strong>1.</strong> We calculate a simple placeholder rate based on service + weight.</li>
                    <li><strong>2.</strong> If your wallet balance covers it, we auto-charge your wallet.</li>
                    <li><strong>3.</strong> If not, you’ll be redirected to a crypto checkout.</li>
                </ul>
                <div class="cp-info-box">
                    <p><strong>Tip:</strong> You can top up your wallet anytime on the Wallet page using crypto.</p>
                </div>
                <div class="cp-footer-mini">
                    <span>© CryptoParcel</span>
                </div>
            </aside>
        </div>
    </div>
</main>
</body>
</html>
