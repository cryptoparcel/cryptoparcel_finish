{% extends 'base.html' %}
{% block title %}Admin — CryptoParcel{% endblock %}
{% block content %}
<section class="section">
  <h2>Admin Dashboard</h2>
  <p>Total users: {{ total_users }}</p>
  <p>Total orders: {{ total_orders }}</p>
  <p>Total payments: {{ total_payments }}</p>
  <p>Total wallet balance: ${{ '%.2f'|format(total_wallet_balance or 0.0) }}</p>
  <form method="POST" action="{{ url_for('admin_cleanup') }}">
    <button class="btn">Run cleanup</button>
  </form>
  <p><a href="{{ url_for('admin_orders') }}">View orders</a> ·
     <a href="{{ url_for('admin_payments') }}">View payments</a> ·
     <a href="{{ url_for('admin_users') }}">View users</a> ·
     <a href="{{ url_for('admin_logout') }}">Admin logout</a></p>

  <h3>Recent orders</h3>
  <ul>
  {% for o in recent_orders %}
    <li>#{{ o.id }} — {{ o.status }} — ${{ '%.2f'|format(o.amount_usd) }}</li>
  {% endfor %}
  </ul>

  <h3>Recent payments</h3>
  <ul>
  {% for p in recent_payments %}
    <li>#{{ p.id }} — {{ p.type }} — {{ p.status }} — ${{ '%.2f'|format(p.amount_usd) }}</li>
  {% endfor %}
  </ul>
</section>
{% endblock %}
